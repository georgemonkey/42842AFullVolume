{"mode":"Text","textContent":"#region VEXcode Generated Robot Configuration\nfrom vex import *\nimport urandom\n\n# Brain should be defined by default\nbrain=Brain()\n\n# Robot configuration code\nbrain_inertial = Inertial()\nleft_motor = Motor(Ports.PORT6, False)\nright_motor = Motor(Ports.PORT12, False)\ngyro5 = Gyro(Ports.PORT5)\nintake_motor_a = Motor(Ports.PORT3, False)\nintake_motor_b = Motor(Ports.PORT9, True)\nintake = MotorGroup(intake_motor_a, intake_motor_b)\nlift_motor_a = Motor(Ports.PORT2, True)\nlift_motor_b = Motor(Ports.PORT8, False)\nlift = MotorGroup(lift_motor_a, lift_motor_b)\nt3 = Touchled(Ports.PORT7)\nt4 = Touchled(Ports.PORT1)\n\n\n\n# Make random actually random\ndef setRandomSeedUsingAccel():\n    wait(100, MSEC)\n    xaxis = brain_inertial.acceleration(XAXIS) * 1000\n    yaxis = brain_inertial.acceleration(YAXIS) * 1000\n    zaxis = brain_inertial.acceleration(ZAXIS) * 1000\n    urandom.seed(int(xaxis + yaxis + zaxis))\n    \n# Set random seed \nsetRandomSeedUsingAccel()\n\n#endregion VEXcode Generated Robot Configuration\n\n# ------------------------------------------\n# \n# \tProject:      VEXcode Project\n# \tAuthor:       VEX\n# \tCreated:\n# \tDescription:  VEXcode IQ Python Project\n# \n# ------------------------------------------\n\n# Library imports\nfrom vex import *\n\n# Begin project code\ngyro5.set_heading(0, DEGREES)\nleft_motor.set_stopping(HOLD)\nright_motor.set_stopping(HOLD)\n\n\n\ndef turning(target_angle, KP=2.1, KD = 13 , KI = 0.00, tol = 1, p = 3, wasting_time = True):\n    left_motor.spin(REVERSE)\n    right_motor.spin(REVERSE)\n    t3.set_color(Color.RED)\n    t4.set_color(Color.RED)\n\n    # Set the constants for the PID loop\n\n\n    error_sum = 0  # Initialize the error sum\n    last_error = 0  # Initialize the last errorx\n    error_offset = 0\n    prev_errors = [0,0,0]\n    while True:\n        \n        left_motor.set_stopping(HOLD)\n        right_motor.set_stopping(HOLD)\n        # Read the gyro5 angle\n        facing = gyro5.heading()\n\n        # Calculate the error`\n        error = target_angle - facing\n        error = error*-1\n        if error > 180:\n            error = error-360\n        if error <-180:\n            error = error+360\n\n        ##print(str(error))\n        # Calculate the proportional term\n        p_term = KP * error\n\n        # Calculate the integral term\n        error_sum += error\n        i_term = KI * error_sum\n        #if i_term > 50 or i_term < -50: \n        #    i_term = 0\n        # Calculate the derivative term\n        d_term = KD * (error - last_error)\n        last_error = error\n\n        # Calculate the PID output\n        if i_term >= 20:\n            i_term = 0\n        pid_output = p_term + i_term/10 + d_term\n        #brain.screen.#print(str(gyro5.heading()))\n\n        \n        \n        #print(str(pid_output) + \" p:\" + str(p_term) + \" i:\" + str(i_term/10) + \" d:\" +str(d_term) + \" e:\" + str(error))\n        #print()\n        pid_output = pid_output/p\n        # Set the motor speeds based on the PID output\n        left_motor.set_velocity(pid_output)\n        right_motor.set_velocity(pid_output)\n\n        # Check if the turn is complete\n        \n        #print(str(abs(error)))\n    \n        prev_errors[error_offset] = error\n        error_offset += 1\n        if error_offset == 3:\n            error_offset = 0\n        total_errors = 0\n        change_in_error = 0\n        change_in_error_large = False\n\n        for loop in range(len(prev_errors)):\n            ##print(str(i))\n            prev_error_number = prev_errors[loop]\n            total_errors += prev_error_number\n            if loop > 0:\n                change_in_error = prev_errors[loop] - prev_errors[loop-1]\n                #print(change_in_error)\n                if abs(float(change_in_error)) >= 0.07:\n                    change_in_error_large = True\n        if prev_errors[2] != 0:\n            if not change_in_error_large:\n                for x in range(5):\n                    pass\n                KP += 0.05\n        avg_error = total_errors/len(prev_errors)\n        if abs(error) < tol and abs(avg_error) < tol:\n            left_motor.stop()\n            right_motor.stop()\n            break\n\n        wait(10,MSEC)  # Wait for 20ms to allow the motors to move\n\n\n\n\n    t3.set_color(Color.GREEN)\n    t4.set_color(Color.GREEN)\n\n\ndef forward(time,vel):\n    left_motor.set_stopping(BRAKE)\n    right_motor.set_stopping(BRAKE)\n    left_motor.set_velocity(vel,PERCENT)\n    right_motor.set_velocity(vel,PERCENT)\n    left_motor.spin(FORWARD)\n    right_motor.spin(REVERSE)\n    wait(time,MSEC)\n    left_motor.stop()\n    right_motor.stop()\n\ndef backward(time,vel):\n    left_motor.set_stopping(BRAKE)\n    right_motor.set_stopping(BRAKE)\n    left_motor.set_velocity(vel,PERCENT)\n    right_motor.set_velocity(vel,PERCENT)\n    left_motor.spin(REVERSE)\n    right_motor.spin(FORWARD)\n    wait(time,MSEC)\n    left_motor.stop()\n    right_motor.stop()\n\n\n\n\n#codestarthere   \n#EXAMPLE\n\n\nintake.set_velocity(100,PERCENT)\nintake.spin(FORWARD)\n\nforward(1500,85)\nwait(750,MSEC)\nbackward(1300,85)\nturning(250)\nforward(1500,100)\nturning(270,2.2)\nbackward(2000,100)\nlift.set_velocity(100,PERCENT)\nlift.spin_for(FORWARD,1800)\nwait(0.75,SECONDS)\nlift.spin_for(REVERSE,1800)\nwait(2,SECONDS)\n\"\"\"\nforward(200 ,85)\nturning(35,2.3)\nforward(1000,85)\nwait(1000,MSEC)\nforward(1200,85)\nwait(2000,MSEC)\n\n\"\"\"\nlift.set_velocity(100,PERCENT)\nlift.spin_for(FORWARD,150)\nwait(1000,MSEC)\nturning(200)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","textLanguage":"python","rconfig":[{"port":[6],"name":"left_motor","customName":true,"deviceType":"Motor","deviceClass":"motor","setting":{"reversed":"false","fwd":"forward","rev":"reverse"},"triportSourcePort":22},{"port":[12],"name":"right_motor","customName":true,"deviceType":"Motor","deviceClass":"motor","setting":{"reversed":"false","fwd":"forward","rev":"reverse"},"triportSourcePort":22},{"port":[5],"name":"gyro5","customName":true,"deviceType":"Gyro","deviceClass":"gyro","setting":{},"triportSourcePort":22},{"port":[3,9],"name":"intake","customName":true,"deviceType":"MotorGroup","deviceClass":"motor_group","setting":{"fwd":"forward","rev":"reverse","motor_a_reversed":"false","motor_b_reversed":"true"},"triportSourcePort":22},{"port":[2,8],"name":"lift","customName":true,"deviceType":"MotorGroup","deviceClass":"motor_group","setting":{"fwd":"forward","rev":"reverse","motor_a_reversed":"true","motor_b_reversed":"false"},"triportSourcePort":22},{"port":[7],"name":"t3","customName":true,"deviceType":"TouchLED","deviceClass":"touchled","setting":{},"triportSourcePort":22},{"port":[1],"name":"t4","customName":true,"deviceType":"TouchLED","deviceClass":"touchled","setting":{},"triportSourcePort":22}],"slot":3,"platform":"IQ","sdkVersion":"20230818.11.00.00","appVersion":"3.0.1","minVersion":"3.0.0","fileFormat":"1.2.0","icon":"","targetBrainGen":"Second","v5SoundsEnabled":false,"target":"Physical"}